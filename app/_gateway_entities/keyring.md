---
title: Keyring
content_type: reference
entities:
  - keyring

description: |
  A Keyring is the mechanism for storing sensitive data fields, such as consumer secrets, in an encrypted format within the database. 
  This provides for encryption-at-rest security controls in a {{site.base_gateway}} cluster.

related_resources:
  - text: Key entity
    url: /gateway/entities/key/
  - text: Key-set entity
    url: /gateway/entities/key-set/

tier: enterprise

api_specs:
  - gateway/admin-ee

tools:
  - admin-api

schema:
  api: gateway/admin-ee
  path: /schemas/Keyring

---

@todo
[FAQ: why choose keyring encryption over vaults? what are the benefits/differences?]

## What is a Keyring?

A Keyring is a mechanism for storing sensitive data fields, such as consumer secrets, in an encrypted format within the database. 

This functionality provides transparent, symmetric encryption of sensitive data fields at rest. 
When enabled, encryption and decryption of data are done on-the-fly by Kong immediately before writing to the database and after reading from the database. 
Responses containing sensitive fields generated by the Admin API continue to show data as plain text. Kong runtime elements, such as plugins, can access sensitive fields transparently, without requiring additional configuration.

## Schema

{% entity_schema %}

## Enable Keyring

### 1. Generate an RSA key pair

Use the `openssl` CLI to generate an RSA key pair that can be used to export and recover keyring material.
```sh
openssl genrsa -out key.pem 2048
openssl rsa -in key.pem -pubout -out cert.pem
```

### 2. Configure Kong
Enabling data encryption in Kong requires modifying the Kong configuration. You can either update `kong.conf` or use environment variables:

{% navtabs %}
{% navtab "kong.conf" %}
Set the following values in `kong.conf`:
```sh
keyring_enabled = on
keyring_strategy = cluster
keyring_recovery_public_key = /path/to/generated/cert.pem
```
{% endnavtab %}
{% navtab "Environment variables" %}
Create the following environment variables:
```sh
export KONG_KEYRING_ENABLED=on
export KONG_KEYRING_STRATEGY=cluster
export KONG_KEYRING_RECOVERY_PUBLIC_KEY=/path/to/generated/cert.pem
```
{% endnavtab %}
{% endnavtabs %}