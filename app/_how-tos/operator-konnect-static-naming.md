---
# @TODO KO 2.1
title: Static naming for Konnect Control Planes
description: "Ensure your Konnect Control Planes use predictable names to support references from other Kong resources."
content_type: how_to

permalink: /operator/konnect/how-to/static-naming/
breadcrumbs:
  - /operator/
  - index: operator
    group: Konnect

products:
  - operator

works_on:
  - konnect

tldr:
  q: How do I give my Konnect Control Plane a predictable name?
  a: |
    Add the `gateway-operator.konghq.com/static-naming: "true"` annotation to your `Gateway` resource.

---

## Overview

By default, {{ site.operator_product_name }} generates unique, dynamic names for `KonnectGatewayControlPlane` resources created from a `Gateway` (for example, `default-hybrid-<hash>`). While this prevents naming collisions, it makes it difficult to reference the Control Plane in other resources, such as `KongConsumer`, before it is actually created.

The `gateway-operator.konghq.com/static-naming: "true"` annotation instructs the operator to use a static, predictable name for the generated Control Plane based on the Gateway's namespace and name (for example, `default-hybrid`). This enables you to configure references in advance.

## Configuration

The following example demonstrates how to use the static naming annotation to allow a `KongConsumer` to reference a Control Plane.

### 1. Configure the Gateway with Static Naming

Add the `gateway-operator.konghq.com/static-naming: "true"` annotation to your `Gateway` resource.

```yaml
---
kind: KonnectAPIAuthConfiguration
apiVersion: konnect.konghq.com/v1alpha1
metadata:
  name: konnect-api-auth
spec:
  type: token
  token: kpat_XXXXXXXXXXXXXXXXXXX
  serverURL: us.api.konghq.tech
---
kind: GatewayConfiguration
apiVersion: gateway-operator.konghq.com/v2beta1
metadata:
  name: hybrid
  namespace: kong
spec:
  konnect:
    authRef:
      name: konnect-api-auth
  dataPlaneOptions:
    deployment:
      podTemplateSpec:
        spec:
          containers:
          - name: proxy
            image: kong/kong-gateway:3.12
---
kind: GatewayClass
apiVersion: gateway.networking.k8s.io/v1
metadata:
  name: hybrid
spec:
  controllerName: konghq.com/gateway-operator
  parametersRef:
    group: gateway-operator.konghq.com
    kind: GatewayConfiguration
    name: hybrid
    namespace: kong
---
kind: Gateway
apiVersion: gateway.networking.k8s.io/v1
metadata:
  name: hybrid
  namespace: kong
  annotations:
    # This annotation enables static naming
    gateway-operator.konghq.com/static-naming: "true"
spec:
  gatewayClassName: hybrid
  listeners:
  - name: http
    protocol: HTTP
    port: 80
```

### 2. Reference the Static Name in a KongConsumer

With static naming enabled, the generated `KonnectGatewayControlPlane` will be named `kong-hybrid` (following the pattern `{namespace}-{name}`). You can now reference this name in a `KongConsumer`.

```yaml
kind: KongConsumer
apiVersion: configuration.konghq.com/v1
metadata:
  name: consumer1
  namespace: kong
username: consumer1
spec:
  controlPlaneRef:
    type: konnectNamespacedRef
    konnectNamespacedRef:
      # This matches the static name generated by the Gateway
      name: hybrid
credentials:
- consumer1-acl-1
---
kind: Secret
apiVersion: v1
metadata:
  name: consumer1-acl-1
  namespace: kong
  labels:
    konghq.com/credential: acl
    konghq.com/secret: "true"
stringData:
  group: "acl-group"
```

## Naming Pattern

When static naming is enabled, the Operator derives the name for the `KonnectGatewayControlPlane` using the following logic:

1.  If the Gateway resides in the same namespace as the Operator, the name will be the same as the Gateway name (for example, `hybrid`).
2.  If the Gateway resides in a different namespace, the name will be prefixed with the namespace (for example, `kong-hybrid`).

This ensures that the name remains predictable while still avoiding collisions across different namespaces.

## Verify the Setup

To verify that the `KongConsumer` is correctly provisioned using the predictable Control Plane name, you can deploy the standard Kong echo service and an `HTTPRoute` that uses the consumer.

### 1. Deploy the standard echo service

```bash
kubectl apply -f https://developer.konghq.com/manifests/kic/echo-service.yaml -n kong
```

### 2. Create an HTTPRoute

Create an `HTTPRoute` that references the `Gateway` and the `echo` service.

```yaml
apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: echo-consumer-route
  namespace: kong
spec:
  parentRefs:
    - name: hybrid
  rules:
    - matches:
        - path:
            type: PathPrefix
            value: /echo
      backendRefs:
        - name: echo
          kind: Service
          port: 80
```
