metrics:
  - name: http.server.request.count
    description: Total number of incoming HTTP requests.
    attributes:
      - kong.service.name
      - kong.route.name
      - kong.auth.consumer.name
      - kong.response.source
      - kong.workspace.name
      - http.request.method
  - name: kong.latency.total
    description: Complete end-to-end duration of a request in seconds.
    attributes:
      - kong.service.name
      - kong.route.name
      - kong.workspace.name
  - name: kong.latency.internal
    description: "Kong’s internal processing time in seconds, from when the Gateway receives the request from the client to when it sends the request to the upstream service."
    attributes:
      - kong.service.name
      - kong.route.name
      - kong.workspace.name
  - name: kong.latency.upstream
    description: Upstream processing time in seconds, from when the Gateway sends the request to the upstream, to when the data is returned to Kong.
    attributes:
      - kong.service.name
      - kong.route.name
      - kong.workspace.name
  - name: http.server.request.size
    description: Size of each incoming HTTP request in bytes.
    attributes:
      - kong.service.name
      - kong.route.name
      - kong.auth.consumer.name
  - name: http.server.response.size
    description: Total size of the HTTP response sent back to the client in bytes.
    attributes:
      - kong.service.name
      - kong.route.name
      - kong.auth.consumer.name
  - name: kong.shared_dict.usage
    description: Current memory usage of a shared dict in bytes.
    attributes:
      - kong.shared_dict.name
      - kong.subsystem
  - name: kong.shared_dict.size
    description: Total memory size of a shared dict in bytes.
    attributes:
      - kong.shared_dict.name
      - kong.subsystem
  - name: kong.memory.workers.lua_vm
    description: "Memory used by the worker’s Lua VM in bytes."
    attributes:
      - kong.pid
      - kong.subsystem
  - name: kong.nginx.connection.count
    description: Number of client connections in Nginx.
    attributes:
      - kong.subsystem
      - kong.connection.state
  - name: kong.nginx.timer.count
    description: Number of internal scheduled timers Nginx is running in the background.
    attributes:
      - kong.timer.state
  - name: kong.db.connection.status
    description: Shows whether Kong has an active database connection. A value of 1 means connected. A value of 0 means not connected.
  - name: kong.cp.connection.status
    description: Shows whether the data plane has an active connection to the control plane. A value of 1 means connected. A value of 0 means not connected.
  - name: kong.upstream.target.status
    description: "Upstream target’s health. The actual status is in the state attribute, with the metric value set to 1 when a state is populated."
    attributes:
      - kong.upstream.name
      - kong.target.address
      - server.address
      - kong.upstream.state
      - kong.subsystem
  - name: kong.dp.connection.last_seen
    description: Timestamp when the control plane last saw a data plane connect. This metric appears only on control plane nodes and is reported per data plane.
    attributes:
      - kong.dp.host.name
      - kong.dp.node.id
      - kong.dp.node.ip
  - name: kong.dp.version.compatible
    description: "Shows whether a data plane is compatible with the control plane’s version. This metric appears only on control plane nodes and is reported per data plane. A value of 1 means compatible and 0 means not."
    attributes:
      - kong.dp.host.name
      - kong.dp.node.id
      - kong.dp.node.ip
      - kong.dp.node.version
  - name: kong.dp.config_hash
    description: Shows the config hash the control plane has for each data plane. This metric appears only on control plane nodes and is reported per data plane.
    attributes:
      - kong.dp.host.name
      - kong.dp.node.id
      - kong.dp.node.ip
  - name: kong.dp.cluster_cert.expiry
    description: "Timestamp when the data plane’s cluster certificate will expire."
  - name: kong.db.entity.count
    description: "Number of entities stored in Kong’s database."
  - name: kong.db.entity.error.count
    description: Number of errors seen during database entity count collection.
  - name: kong.ee.license.signature
    description: Last 8 bytes of the Enterprise license signature as a number.
  - name: kong.ee.license.expiration
    description: Unix epoch time when the license expires, shifted by 24 hours to avoid timezone differences.
  - name: kong.ee.license.features
    description: |
      Indicates whether the data plane can read or write entities under the current license. 
      Each capability (<code>ee_entity_read</code> and <code>ee_entity_write</code>) is reported as its own metric, where 1 means allowed and 0 means not allowed.
    attributes:
      - kong.ee.license.feature
  - name: kong.ee.license.error.count
    description: Number of errors that occurred while collecting license information.

access_logs:
  - client.address
  - url.query
  - url.full
  - url.path
  - user_agent.original
  - http.request.method
  - http.request.size
  - http.request.header.*
  - http.response.header.*
  - http.response.size
  - http.response.status_code
  - kong.request.id
  - kong.request.started_at
  - kong.response.source
  - kong.workspace.id
  - kong.workspace.name
  - kong.latency.client
  - kong.latency.third_party.total
  - kong.latency.third_party.dns
  - kong.latency.third_party.http_client
  - kong.latency.third_party.redis
  - kong.latency.internal
  - kong.latency.upstream
  - kong.latency.receive
  - kong.latency.total
  - kong.latency.socket
  - kong.route.created_at
  - kong.route.http_redirect_status_code
  - kong.route.id
  - kong.route.name
  - kong.route.tags
  - kong.route.path_handling
  - kong.route.paths
  - kong.route.preserve_host
  - kong.route.protocols
  - kong.route.regex_priority
  - kong.route.request_buffering
  - kong.route.response_buffering
  - kong.route.service.id
  - kong.route.strip_path
  - kong.route.updated_at
  - kong.route.ws_id
  - kong.service.connect_timeout
  - kong.service.created_at
  - kong.service.enabled
  - kong.service.host
  - kong.service.id
  - kong.service.name
  - kong.service.port
  - kong.service.protocol
  - kong.service.read_timeout
  - kong.service.retries
  - kong.service.updated_at
  - kong.service.write_timeout
  - kong.service.ws_id
  - kong.service.tags
  - kong.upstream.try.*
  - kong.upstream.status_code
  - kong.upstream.uri
  - kong.auth.type
  - kong.auth.consumer.*
  - kong.auth.authenticated_entity.*

resource_attributes:
  service.name: Name of the service exposing the signal. In most, if not all, this value will be <code>kong</code> by default.
  service.version: Gateway version of the node exposing the signal.
  service.instance.id: ID of the node exposing the signal.

attributes:
  kong.service.name: Name of the Gateway Service.
  kong.route.name: Name of the Route.
  kong.auth.consumer.name: Name of the authenticated Consumer.
  kong.response.source:  |
    Origin of the current response.
    <br>
    Possible values:
    <ul>
      <li><code>upstream</code> if the response originated by successfully contacting the upstream service</li>
      <li><code>kong</code> otherwise</li>
    </ul>
  kong.workspace.name: Name of the Workspace.
  http.request.method: Method used in the HTTP request.
  kong.shared_dict.name: Name of the shared dict.
  kong.subsystem: |
    Nginx subsystem that produced the metric. 
    <br>
    Possible values:
    <ul>
      <li><code>http</code></li>
      <li><code>stream</code></li>
    </ul>
  kong.connection.state: |
    State of the client connection.
    <br>
    Possible values:
    <ul>
      <li><code>accepted</code></li>
      <li><code>handled</code></li>
      <li><code>total</code></li>
      <li><code>active</code></li>
      <li><code>reading</code></li>
      <li><code>writing</code></li>
      <li><code>waiting</code></li>
    </ul>
  kong.pid: Worker process ID.
  kong.timer.state: State of the timer.
  kong.upstream.name: Name of the Upstream.
  kong.target.address: Address of the Target.
  server.address: Address of the server.
  kong.upstream.state: |
    Health of the Upstream Target.
    <br>
    Possible values:
    <ul>
      <li><code>healthy</code></li>
      <li><code>unhealthy</code></li>
      <li><code>dns_error</code></li>
    </ul>
  kong.dp.host.name: Host name fo the data plane.
  kong.dp.node.id: ID of the data plane node.
  kong.dp.node.ip: IP address of the data plane node.
  kong.dp.node.version: Version of the data plane node.
  kong.ee.license.feature: |
    Enterprise feature.
    <br>
    Possible values:
    <ul>
      <li><code>ee_entity_read</code></li>
      <li><code>ee_entity_write</code></li>
    </ul>
  client.address:
  url.query:
  url.full:
  url.path:
  user_agent.original:
  http.request.size:
  http.request.header.*:
  http.response.header.*:
  http.response.size:
  http.response.status_code:
  kong.request.id:
  kong.request.started_at:
  kong.workspace.id:
  kong.latency.client:
  kong.latency.third_party.total:
  kong.latency.third_party.dns:
  kong.latency.third_party.http_client:
  kong.latency.third_party.redis:
  kong.latency.internal:
  kong.latency.upstream:
  kong.latency.receive:
  kong.latency.total:
  kong.latency.socket:
  kong.route.created_at:
  kong.route.http_redirect_status_code:
  kong.route.id:
  kong.route.tags:
  kong.route.path_handling:
  kong.route.paths:
  kong.route.preserve_host:
  kong.route.protocols:
  kong.route.regex_priority:
  kong.route.request_buffering:
  kong.route.response_buffering:
  kong.route.service.id:
  kong.route.strip_path:
  kong.route.updated_at:
  kong.route.ws_id:
  kong.service.connect_timeout:
  kong.service.created_at:
  kong.service.enabled:
  kong.service.host:
  kong.service.id:
  kong.service.port:
  kong.service.protocol:
  kong.service.read_timeout:
  kong.service.retries:
  kong.service.updated_at:
  kong.service.write_timeout:
  kong.service.ws_id:
  kong.service.tags:
  kong.upstream.try.*:
  kong.upstream.status_code:
  kong.upstream.uri:
  kong.auth.type:
  kong.auth.consumer.*:
  kong.auth.authenticated_entity.*: