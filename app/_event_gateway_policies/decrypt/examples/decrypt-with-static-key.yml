title: Decrypt using a static key

description: Decrypt everything using a static key.


extended_description: |
  Decrypt everything using a static key.

  The key must be a secret reference to a 128-bit (16-byte) base64-encoded string, or the key itself as a string.  
  We recommend using secret references to avoid exposing sensitive data in your configuration.

requirements: 
 - "A corresponding [Encrypt policy](/event-gateway/policies/encrypt/examples/encrypt-with-static-key/). Event Gateway uses the key ID from the Encrypt policy along with the actual key in the Decrypt policy to successfully decrypt."
weight: 900

variables:
  key_value:
    description: A custom value for the static key `static://key` that will be used for encrypting the `value` and `key`` of the Kafka records.
    value: $KEY_VALUE


name: decrypt-static-key
type: decrypt
config:
  failure_mode: error
  key_sources:
    - type: static
      keys:
        - id: static://key
          key: ${key_value}
  decrypt:
    - part_of_record: key
      key_id: static://key
    - part_of_record: value
      key_id: static://key

tools:
  - konnect-api
