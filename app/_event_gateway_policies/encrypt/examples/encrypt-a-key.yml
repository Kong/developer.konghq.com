title: Encrypt a key

description: Encrypt a specific key.

# where do we define the key source? is this still necessary?

weight: 900

requirements: 
 - "A corresponding [Decrypt policy](/event-gateway/policies/decrypt/examples/decrypt-a-key/). Event Gateway uses the key ID from the Encrypt policy along with the actual key in the Decrypt policy to successfully decrypt."
 
variables:
  key_source_id: 
    description: |
      "A list of static, user-provided keys. Each one must be 128 bits long. For example: `static://static-key-named-in-source`.
    value: $KEY_SOURCE
  key_id:
    description: |
      The ID defined in the list of static keys. This key will be used for encryption. For example: `static://static-key-named-in-source`.
    value: $KEY_ID

type: encrypt
name: encrypt-static-key
config:
  failure_mode: error
  encrypt:
    - part_of_record: value
      key_id: ${key_id}
    - part_of_record: key
      key_id: ${key_id}
  key_sources:
    - type: static
      keys:
        - id: ${key_id}
          key: ${env["MY_SECRET"]}
    - type: static
      keys:
        - id: ${key_id}
          key: ${env["MY_SECRET"]}

tools:
  - konnect-api
