{% comment %}
Usage: {% include per-provider-capabilities.html providers=site.data.providers.providers provider_name="OpenAI" %}
{% endcomment %}

{% assign provider = include.providers.providers | where: "name", include.provider_name | first %}

{% if provider %}

You can proxy requests to {{ provider.name }} AI models through Kong AI Gateway using the [AI Proxy](/plugins/ai-proxy/) and [AI Proxy Advanced](/plugins/ai-proxy-advanced/) plugins. This reference documents all supported AI capabilities, configuration requirements, and provider-specific details needed for proper integration.

## Base URL

The base URL for {{ provider.name }} is `{{ provider.url_pattern }}`, where `{route_type_path}` is determined by the capability being used.

{% comment %}Check which categories have supported features{% endcomment %}
{% assign has_text = false %}
{% assign has_advanced_text = false %}
{% assign has_processing = false %}
{% assign has_audio = false %}
{% assign has_image = false %}
{% assign has_video = false %}
{% assign has_realtime = false %}

{% if provider.chat.supported or provider.completions.supported or provider.embeddings.supported %}
  {% assign has_text = true %}
{% endif %}

{% if provider.function_calling.supported %}
  {% assign has_advanced_text = true %}
{% endif %}

{% if provider.files.supported or provider.batches.supported or provider.assistants.supported or provider.responses.supported %}
  {% assign has_processing = true %}
{% endif %}

{% if provider.audio.speech.supported or provider.audio.transcriptions.supported or provider.audio.translations.supported %}
  {% assign has_audio = true %}
{% endif %}

{% if provider.image.generations.supported or provider.image.edits.supported %}
  {% assign has_image = true %}
{% endif %}

{% if provider.video.generations.supported %}
  {% assign has_video = true %}
{% endif %}

{% if provider.realtime.supported %}
  {% assign has_realtime = true %}
{% endif %}

## Supported capabilities

The following tables show the AI capabilities supported by {{ provider.name }} provider when used with the [AI Proxy](/plugins/ai-proxy/) or the [AI Proxy Advanced](/plugins/ai-proxy-advanced/) plugin.

{% comment %}Text Generation{% endcomment %}
{% if has_text %}
### Text generation

Standard text generation capabilities including chat, completions, and embeddings.

<table>
  <thead>
    <tr>
      <th>Capability</th>
      <th>Upstream path</th>
      <th>Route type</th>
      <th>Streaming</th>
      <th>Model example</th>
      <th>Min version</th>
    </tr>
  </thead>
  <tbody>
    {% if provider.chat.supported %}
    <tr>
      <td>Chat completions</td>
      <td><code>{{ provider.chat.upstream_path }}</code></td>
      <td><code>{{ provider.chat.route_type }}</code></td>
      <td>{{ provider.chat.streaming | to_check }}</td>
      <td>{{ provider.chat.model_example }}</td>
      <td>{{ provider.chat.min_version }}</td>
    </tr>
    {% endif %}

    {% if provider.completions.supported %}
    <tr>
      <td>Completions</td>
      <td><code>{{ provider.completions.upstream_path }}</code></td>
      <td><code>{{ provider.completions.route_type }}</code></td>
      <td>{{ provider.completions.streaming | to_check }}</td>
      <td>{{ provider.completions.model_example }}</td>
      <td>{{ provider.completions.min_version }}</td>
    </tr>
    {% endif %}

    {% if provider.embeddings.supported %}
    <tr>
      <td>Embeddings</td>
      <td><code>{{ provider.embeddings.upstream_path }}</code></td>
      <td><code>{{ provider.embeddings.route_type }}</code></td>
      <td>{{ provider.embeddings.streaming | to_check }}</td>
      <td>{{ provider.embeddings.model_example }}</td>
      <td>{{ provider.embeddings.min_version }}</td>
    </tr>
    {% endif %}
  </tbody>
</table>
{% endif %}

{% comment %}Advanced Text Generation{% endcomment %}
{% if has_advanced_text %}
### Advanced text generation

Function calling allows models to use external tools and APIs.

<table>
  <thead>
    <tr>
      <th>Capability</th>
      <th>Upstream path</th>
      <th>Route type</th>
      <th>Streaming</th>
      <th>Model example</th>
      <th>Min version</th>
    </tr>
  </thead>
  <tbody>
    {% if provider.function_calling.supported %}
    <tr>
      <td>Function calling</td>
      <td><code>{{ provider.function_calling.upstream_path }}</code></td>
      <td><code>{{ provider.function_calling.route_type }}</code></td>
      <td>{{ provider.function_calling.streaming | to_check }}</td>
      <td>{{ provider.function_calling.model_example }}</td>
      <td>{{ provider.function_calling.min_version }}</td>
    </tr>
    {% endif %}
  </tbody>
</table>
{% endif %}

{% comment %}Processing{% endcomment %}
{% if has_processing %}
### Processing

File management, batch operations, assistants, and response handling.

<table>
  <thead>
    <tr>
      <th>Capability</th>
      <th>Upstream path</th>
      <th>Route type</th>
      <th>Streaming</th>
      <th>Model example</th>
      <th>Min version</th>
    </tr>
  </thead>
  <tbody>
    {% if provider.files.supported %}
    <tr>
      <td>Files{% if provider.files.note.content %}<sup>*</sup>{% endif %}</td>
      <td><code>{{ provider.files.upstream_path }}</code></td>
      <td><code>{{ provider.files.route_type }}</code></td>
      <td>{{ provider.files.streaming | to_check }}</td>
      <td>{{ provider.files.model_example }}</td>
      <td>{{ provider.files.min_version }}</td>
    </tr>
    {% endif %}

    {% if provider.batches.supported %}
    <tr>
      <td>Batches{% if provider.batches.note.content %}<sup>*</sup>{% endif %}</td>
      <td><code>{{ provider.batches.upstream_path }}</code></td>
      <td><code>{{ provider.batches.route_type }}</code></td>
      <td>{{ provider.batches.streaming | to_check }}</td>
      <td>{{ provider.batches.model_example }}</td>
      <td>{{ provider.batches.min_version }}</td>
    </tr>
    {% endif %}

    {% if provider.assistants.supported %}
    <tr>
      <td>Assistants</td>
      <td><code>{{ provider.assistants.upstream_path }}</code></td>
      <td><code>{{ provider.assistants.route_type }}</code></td>
      <td>{{ provider.assistants.streaming | to_check }}</td>
      <td>{{ provider.assistants.model_example }}</td>
      <td>{{ provider.assistants.min_version }}</td>
    </tr>
    {% endif %}

    {% if provider.responses.supported %}
    <tr>
      <td>Responses</td>
      <td><code>{{ provider.responses.upstream_path }}</code></td>
      <td><code>{{ provider.responses.route_type }}</code></td>
      <td>{{ provider.responses.streaming | to_check }}</td>
      <td>{{ provider.responses.model_example }}</td>
      <td>{{ provider.responses.min_version }}</td>
    </tr>
    {% endif %}
  </tbody>
</table>

{% comment %}Processing notes{% endcomment %}
{% assign has_processing_notes = false %}
{% if provider.files.note.content or provider.batches.note.content %}
  {% assign has_processing_notes = true %}
{% endif %}

{% if has_processing_notes %}
<sup>*</sup> Notes:

{% if provider.files.note.content %}* {{ provider.files.note.content }}{% endif %}
{% if provider.batches.note.content %}* {{ provider.batches.note.content }}{% endif %}
{% endif %}
{% endif %}

{% comment %}Audio{% endcomment %}
{% if has_audio %}
### Audio

Text-to-speech, transcription, and translation capabilities.

<table>
  <thead>
    <tr>
      <th>Capability</th>
      <th>Upstream path</th>
      <th>Route type</th>
      <th>Streaming</th>
      <th>Model example</th>
      <th>Min version</th>
    </tr>
  </thead>
  <tbody>
    {% if provider.audio.speech.supported %}
    <tr>
      <td>Speech</td>
      <td><code>{{ provider.audio.speech.upstream_path }}</code></td>
      <td><code>{{ provider.audio.speech.route_type }}</code></td>
      <td>{{ provider.audio.speech.streaming | to_check }}</td>
      <td>{{ provider.audio.speech.model_example }}</td>
      <td>{{ provider.audio.speech.min_version }}</td>
    </tr>
    {% endif %}

    {% if provider.audio.transcriptions.supported %}
    <tr>
      <td>Transcriptions</td>
      <td><code>{{ provider.audio.transcriptions.upstream_path }}</code></td>
      <td><code>{{ provider.audio.transcriptions.route_type }}</code></td>
      <td>{{ provider.audio.transcriptions.streaming | to_check }}</td>
      <td>{{ provider.audio.transcriptions.model_example }}</td>
      <td>{{ provider.audio.transcriptions.min_version }}</td>
    </tr>
    {% endif %}

    {% if provider.audio.translations.supported %}
    <tr>
      <td>Translations</td>
      <td><code>{{ provider.audio.translations.upstream_path }}</code></td>
      <td><code>{{ provider.audio.translations.route_type }}</code></td>
      <td>{{ provider.audio.translations.streaming | to_check }}</td>
      <td>{{ provider.audio.translations.model_example }}</td>
      <td>{{ provider.audio.translations.min_version }}</td>
    </tr>
    {% endif %}
  </tbody>
</table>
{% endif %}

{% comment %}Image{% endcomment %}
{% if has_image %}
### Image

Image generation and editing capabilities.

<table>
  <thead>
    <tr>
      <th>Capability</th>
      <th>Upstream path</th>
      <th>Route type</th>
      <th>Streaming</th>
      <th>Model example</th>
      <th>Min version</th>
    </tr>
  </thead>
  <tbody>
    {% if provider.image.generations.supported %}
    <tr>
      <td>Generations</td>
      <td><code>{{ provider.image.generations.upstream_path }}</code></td>
      <td><code>{{ provider.image.generations.route_type }}</code></td>
      <td>{{ provider.image.generations.streaming | to_check }}</td>
      <td>{{ provider.image.generations.model_example }}</td>
      <td>{{ provider.image.generations.min_version }}</td>
    </tr>
    {% endif %}

    {% if provider.image.edits.supported %}
    <tr>
      <td>Edits</td>
      <td><code>{{ provider.image.edits.upstream_path }}</code></td>
      <td><code>{{ provider.image.edits.route_type }}</code></td>
      <td>{{ provider.image.edits.streaming | to_check }}</td>
      <td>{{ provider.image.edits.model_example }}</td>
      <td>{{ provider.image.edits.min_version }}</td>
    </tr>
    {% endif %}
  </tbody>
</table>
{% endif %}

{% comment %}Video{% endcomment %}
{% if has_video %}
### Video

Video generation capabilities.

<table>
  <thead>
    <tr>
      <th>Capability</th>
      <th>Upstream path</th>
      <th>Route type</th>
      <th>Streaming</th>
      <th>Model example</th>
      <th>Min version</th>
    </tr>
  </thead>
  <tbody>
    {% if provider.video.generations.supported %}
    <tr>
      <td>Generations</td>
      <td>{{ provider.video.generations.upstream_path }}</td>
      <td><code>{{ provider.video.generations.route_type }}</code></td>
      <td>{{ provider.video.generations.streaming | to_check }}</td>
      <td>{{ provider.video.generations.model_example }}</td>
      <td>{{ provider.video.generations.min_version }}</td>
    </tr>
    {% endif %}
  </tbody>
</table>
{% endif %}

{% comment %}Realtime{% endcomment %}
{% if has_realtime %}
### Realtime

Bidirectional streaming for realtime applications.

<table>
  <thead>
    <tr>
      <th>Capability</th>
      <th>Upstream path</th>
      <th>Route type</th>
      <th>Streaming</th>
      <th>Model example</th>
      <th>Min version</th>
    </tr>
  </thead>
  <tbody>
    {% if provider.realtime.supported %}
    <tr>
      <td>Realtime{% if provider.realtime.note.content %}<sup>*</sup>{% endif %}</td>
      <td><code>{{ provider.realtime.upstream_path }}</code></td>
      <td><code>{{ provider.realtime.route_type }}</code></td>
      <td>{{ provider.realtime.streaming | to_check }}</td>
      <td>{{ provider.realtime.model_example }}</td>
      <td>{{ provider.realtime.min_version }}</td>
    </tr>
    {% endif %}
  </tbody>
</table>

{:.info}
> Realtime interactions are only supported via WebSocket protocol. Use the [AI Proxy Advanced](/plugins/ai-proxy-advanced) plugin to enable this capability.

{% if provider.realtime.note.content %}
<sup>*</sup> {{ provider.realtime.note.content }}
{% endif %}
{% endif %}

{% else %}
Provider "{{ include.provider_name }}" not found.
{% endif %}